# 의존성 주입 (DI)

## 1. 의존성 주입(DI) 이란 무엇인가?

의존성 주입 (Dependency Injection)에 대해 알아보기 전에 객체지향 프로그래밍에 대해 알아보겠습니다.  
객체 지향 프로그래밍을 통해 애플리케이션을 만들때 다양한 객체를 생성하게 됩니다.  
생성된 객체들은 특정 기능을 수행하기 위해 서로 다른 객체들과 상호 작용(message passing)을 하게됩니다.  

좀더 쉽게 설명하기 위해 자동차, 휠, 타이어를 예로 들어보겠습니다.  
```
1. 자동차는 4개의 바퀴를 가지고 있고, 바퀴는 휠과 타이어로 구성되어있습니다.  
2. 경우에 따라 자동차의 휠과 타이어를 교체할 수 있습니다.  
```

위의 문장에 객체를 대입해서 생각해보겠습니다.  
```
1. 자동차 객체는 생산 과정에서 휠과 타이어를 필요로 합니다.
2. 자동차 객체는 다른 휠 객체와 타이어 객체로 교체가 가능합니다.
```

여기서 1번에 대해 자세히 보도록 하곘습니다. 자동차는 반드시 4개의 바퀴를 가지고 있습니다.  
바퀴 객체(휠 + 타이어)는 자동차 객체보다 먼저 생성될수 있지만, 자동차 객체는 생성 시점에는 바퀴 객체를 가지고 있어야 합니다.  
이것을 `의존성`이라고 합니다. 이때 자동차 객체는 바퀴 객체에 의존성을 가지고 있다고 합니다.  

자동차 생성시에 무조건 A 바퀴를 가져야 하는것은 아닙니다. A, B, C의 타이어가 있고 호환이 된다면 모두 가질 수 있습니다.  
그럼 자동차를 만드는 방법에 대해서 한번 생각 해보겠습니다.  
```
1. 자동차와 바퀴를 한번에 만드는 경우
2. 자동차를 만든후 바퀴를 조립하는 방식
```
1번 자동차와 바퀴를 모두 한번에 만드는 경우를 객체 지향의 상속이라고 생각 해보겠습니다.
```java
class Wheel {
    ...
};

class Car implements Wheel {
    ...
};
```
2번 자동차와 바퀴를 따로 만든후 조립하는 경우를 생각해보겠습니다.  
이때 두가지 방법이 있을것같습니다.  

(1) 자동차를 만들고 이후 바퀴를 만들어 조립하는 경우  
(2) 자동차와 바퀴를 따로 만든후 조립하는 경우  

얼핏보면 같은말 같지만, 좀더 생각을 해보면 바퀴를 만들고 조립하는 시점에 대한 차이가 있습니다.  
이해를 위해 (1)의 경우는 같은 공장에서 만든다고 생각을 하고, (2)의 경우는 서로다른 공장에서 만든다고 생각을 해보겠습니다.  

(1)를 코드로 옮겨 보겠습니다.
```java
class Wheel {
    ...
};

class Car {
    Wheel wheel;

    Car() {
        wheel = new Wheel();
    }
};
```
자동차와 바퀴를 같은 공장에서 만들고 있으므로, 자동차를 만들때 타이어를 만들어 조립하게 됩니다.  
자동차 객체를 만들때 바퀴 객체를 내부에서 만들어 조립 하고 있습니다.  

(2)의 경우를 코드로 옮겨보면 다음과 같습니다.
```java
class Wheel {
    ...
};

class Car {
    Wheel wheel

    Car(Wheel wheel) {
        this.wheel = wheel;
    }
};
```
자동차 공장과 바퀴 공장은 서로 다른 공장이므로, 자동차를 만들때 이미 만들어진 바퀴를 조립하게 됩니다.  
자동차 객체를 만들때 외부에서 만들어진 바퀴 객체를 조립 하고 있습니다.  

자동차와 바퀴를 조립하는 작업을 왜 이렇게 복잡하게 설명하냐 하실수도 있습니다.  
하지만 우리는 예시를 통해 이미 의존성 주입의 개념을 모두 학습하였습니다.  
무슨 소리인지 모르시겠다면 다시한번 살펴보겠습니다.  

`자동차와 바퀴를 서로 다른 공장에서 만들고, 자동차를 만들때 바퀴를 가져와 조립하는 방법`이 바로 의존성 주입 입니다.  